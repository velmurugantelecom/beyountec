<div class="container">

    <!-- Plan -->
    <div>
        <p class="f18 my-4 border-btm fbold"> {{'PlanDetails' | translate }}</p>
        <hr />
        <p *ngIf="!isPlanAvailable" class="mt-2">{{'NoPlans' | translate}}</p>
        <div class="d-none d-lg-block">

            <div class="mt-3 plan-container" *ngIf="isPlanAvailable" style="width: 975px;">
                <div class="pr-0" style="width: 365px;">
                    <div class="centercss" style="height:110px;border-bottom: 1px solid #e8e6e6;">
                        <span class="cover-head fbold ">{{'Coverages' | translate}}</span>
                    </div>
                    <ul role="list">
                        <li *ngFor="let item of mandatoryCovers | keyvalue: originalOrder" style="height: 40px; padding-top: 17px;">
                            <span class="coverage-content">{{item.key}}</span>
                            <hr />
                        </li>
                        <li *ngFor="let item of optionalCovers | keyvalue: originalOrder" style="height: 40px; padding-top: 23px;">
                            <span class="coverage-content">{{item.key}}</span>
                            <hr />
                        </li>
                    </ul>
                    <ul class="mb-0">
                        <div>
                            <span class="mr-2 fbold">Discount Code</span>
                            <input class="mr-2" style="width: 100px;" type="text" (blur)="onBlurMethod('promoInputField')" id="promoInputField" placeholder="Discount Code">
                            <span style="margin-top: 5px;color: red;" *ngIf="showPromoDiscount">
                            <i style="font-size:15px" class="fas fa-times-circle fa-2x custom-cursor"></i>
                          </span>
                        </div>
                    </ul>
                </div>
                <div class="plan-container" style="width: 625px;">
                    <mat-card *ngFor="let plan of planOb['plans'];" class="card mr-1" style="width: 200px;" [ngClass]="{
      'mat-elevation-z24': isSelectedPlan(plan)
    }">
                        <div class="no_margin plan-name-amt">
                            <div [ngClass]="{ 
          'silver-card-header': plan.bgColor == 0,
          'gold-card-header': plan.bgColor == 1,
          'platinum-card-header':plan.bgColor == 2,
          'silver-card-header-2': plan.bgColor == 3,
          'gold-card-header-2': plan.bgColor == 4,
          'platinum-card-header-2':plan.bgColor == 5
         }" style="height: 110px;">
                                <div class="col-md-12 centertext pt-2">
                                    <mat-radio-button value="auto" [checked]="plan.confirmed" (click)="selectPlan(plan)">
                                    </mat-radio-button>
                                </div>
                                <div class="col-md-12  centertext header-text f16">
                                    {{plan.planDetails[0].currency}} {{plan.planDetails[0].premiumWithVAT | DecimalValue}}
                                </div>
                                <div class="col-md-12 f15 header-text" style="text-align: center;">{{plan.planDetails[0].planName}}
                                </div>
                            </div>
                            <ul role="list" class="list-coverage MT10" style="text-align: center;" [ngClass]="{
          'silver-card-body': plan.bgColor == 0,
          'gold-card-body': plan.bgColor == 1 ,
          'platinum-card-body':plan.bgColor == 2,
          'silver-card-body-2': plan.bgColor == 3,
          'gold-card-body-2': plan.bgColor == 4,
          'platinum-card-body-2':plan.bgColor == 5
        }">
                                <li *ngFor="let item of mandatoryCovers | keyvalue: originalOrder" style="height: 40px; padding-top: 15px;">
                                    <img class="sub-image" src="assets/compare-plans/tick.png" *ngIf="getData(plan.planDetails[0].planId, item.value);else NoCheckBox1">
                                    <ng-template #NoCheckBox1>
                                        <span style="font-size: 13px;color: red;">
                            <i class="fas fa-times-circle fa-1x custom-cursor"></i>
                        </span>
                                    </ng-template>
                                    <hr />
                                </li>
                                <li *ngFor="let item of optionalCovers | keyvalue: originalOrder" style="height: 40px; padding-top: 15px;">
                                    <mat-checkbox (change)="toggleCoverage(plan, item.value, $event)" *ngIf="getOptionalData(plan.planDetails[0].planId, item.value);else NoCheckBox2" [checked]="doCall(plan, item.value)">
                                    </mat-checkbox>
                                    <ng-template #NoCheckBox2>
                                        <span style="font-size: 13px;color: red;">
                            <i class="fas fa-times-circle fa-1x custom-cursor"></i>
                                        </span>
                                    </ng-template>
                                    <hr class="hor-line" />
                                </li>
                            </ul>
                        </div>
                    </mat-card>
                </div>
            </div>


            <!-- Excess -->
            <div class="py-2" *ngIf="isNotEmpty(excess)">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" *ngFor="let item of excess | keyvalue">
                            <div class="mt-3 pl-4 fbold" style="width: 365px;">{{item.key}} {{'InAED' | translate}}</div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-3 text-center" style="width: 200px;">
                                    {{fetchAmount(plan.planDetails[0].planId, item.value, 'E') | DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Premium -->
            <div class="py-2">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" id="headerDiv">
                            <div class="mt-2 pl-4 fbold" style="width: 365px;">{{'Premium' | translate}}{{'InAED' | translate}}</div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-2 text-center" style="width: 200px;">
                                    {{getPremiumWithCharges(plan.planDetails[0])| DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Discount -->
            <div class="py-2" *ngIf="isNotEmpty(discounts)">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" *ngFor="let item of discounts | keyvalue">
                            <div class="mt-3 pl-4 fbold" style="width: 365px;">{{item.key}}{{'InAED' | translate}}</div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-3 text-center" style="width: 200px;">
                                    {{fetchAmount(plan.planDetails[0].planId, item.value, 'D') | DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Promotional Discount -->
            <div class="py-2" *ngIf="showPromoDiscount">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" id="headerDiv">
                            <div class="mt-2 pl-4 fbold" style="width: 365px;">Promotional Discount (in AED)</div>
                            <div class="row ml-0" *ngFor="let item of promoDiscounts | keyvalue">
                                <ng-container *ngFor="let plan of planOb['plans']">
                                    <div class="mt-2 text-center" style="width: 200px;">
                                        {{fetchAmount(plan.planDetails[0].planId, item.value, 'D') | DecimalValue}}
                                    </div>
                                </ng-container>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <!-- Loadings section-->
            <div class="py-2" *ngIf="isNotEmpty(loadings)">
                <div>
                    <span class="fbold">{{'Loadings' | translate}}</span>
                </div>
                <div>
                    <div style="padding:0px;" class="card-body m-1">
                        <div class="row" *ngFor="let item of loadings | keyvalue">
                            <div class="mt-3 pl-4 fbold" style="width: 365px;">{{item.key}} {{'InAED' | translate}}</div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-3 text-center" style="width: 200px;">
                                    {{fetchAmount(plan.planDetails[0].planId, item.value, 'L') | DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Net Premium -->
            <div class="py-2">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" id="headerDiv">
                            <div class="mt-2 pl-4 fbold" style="width: 365px;">{{'NetPremium' | translate}}{{'InAED' | translate}}
                            </div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-2 text-center" style="width: 200px;">
                                    {{getNetPremium(plan.planDetails[0]) | DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VAT section -->
            <div class="py-2">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" id="headerDiv">
                            <div class="mt-2 pl-4 fbold" style="width: 365px;">{{'VAT' | translate}} {{ VatPercentage }} {{'InAED' | translate}}</div>
                            <div class="row ml-0" *ngFor="let item of charges | keyvalue">
                                <ng-container *ngFor="let plan of planOb['plans']">
                                    <div class="mt-2 text-center" style="width: 200px;">
                                        {{fetchAmount(plan.planDetails[0].planId, item.value, 'P') | DecimalValue}}
                                    </div>
                                </ng-container>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Premium including VAT-->
            <div class="py-2" id="accordionExample">
                <div>
                    <div class="card-body" style="padding:0px;">
                        <div class="row" id="headerDiv">
                            <div class="mt-2 pl-4 fbold" style="width: 365px;font-size: 15px;">{{'PremiumIncludingVAT' | translate}} {{'InAED' | translate}}</div>
                            <ng-container *ngFor="let plan of planOb['plans']">
                                <div class="mt-2 text-center fbold" style="width: 200px;font-size: 15px;">
                                    {{getPremiumWithVat(plan.planDetails[0]) | DecimalValue}}
                                </div>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-block d-sm-none">
            <mat-tab-group mat-align-tabs="center" (selectedTabChange)="onTabChanged($event);" [(selectedIndex)]="demo1TabIndex">
                <mat-tab *ngFor="let plan of planOb['plans'];">
                    <ng-template mat-tab-label>
                        {{plan.planDetails[0].planName}}

                    </ng-template>

                    <div class="flex-container m-1 p-2">
                        <div style="flex-grow: 7">
                            <ul role="list">
                                <li *ngFor="let item of mandatoryCovers | keyvalue: originalOrder" class="p-1 " style="height: 40px;">
                                    <span class="coverage-content">{{item.key}}</span>
                                    <hr />
                                </li>
                                <li *ngFor="let item of optionalCovers | keyvalue: originalOrder" class="p-1 " style="height: 40px;">
                                    <span class="coverage-content">{{item.key}}</span>
                                    <hr />
                                </li>
                            </ul>
                            <ul class="mb-0">
                                <div>
                                    <span class="mr-2 fbold">Discount Code</span>
                                    <input class="mr-2" style="width: 100px;" type="text" (blur)="onBlurMethod('promoInputField2')" id="promoInputField2" placeholder="Discount Code">
                                    <span style="margin-top: 5px;color: red;" *ngIf="showPromoDiscount">
                                    <i style="font-size:15px" class="fas fa-times-circle fa-2x custom-cursor"></i>
                                  </span>
                                </div>
                            </ul>
                        </div>
                        <div style="flex-grow: 3">

                            <ul role="list" class="list-coverage MT10" style="text-align: center;">
                                <li *ngFor="let item of mandatoryCovers | keyvalue: originalOrder" class="p-1 " style="height: 40px;">
                                    <img class="sub-image" src="assets/compare-plans/tick.png" *ngIf="getData(plan.planDetails[0].planId, item.value);else NoCheckBox1">
                                    <ng-template #NoCheckBox1>
                                        <span style="font-size: 13px;">-</span>
                                    </ng-template>
                                    <hr />
                                </li>
                                <li *ngFor="let item of optionalCovers | keyvalue: originalOrder" class="p-1 " style="height: 40px;">
                                    <mat-checkbox (change)="toggleCoverage(plan, item.value, $event)" *ngIf="getOptionalData(plan.planDetails[0].planId, item.value);else NoCheckBox2" [checked]="doCall(plan, item.value)">
                                    </mat-checkbox>
                                    <ng-template #NoCheckBox2>
                                        <span style="font-size: 13px;">-</span>
                                    </ng-template>
                                    <hr />
                                </li>
                            </ul>
                        </div>

                    </div>


                    <!-- Excess -->
                    <div *ngIf="isNotEmpty(excess)">
                        <div class="row" *ngFor="let item of excess | keyvalue">
                            <div class="col-xs-9 col-9 mt-3 pl-4 fbold">{{item.key}} {{'InAED' | translate}}</div>
                            <div class="col-xs-3 col-3 mt-3">
                                {{fetchAmount(plan.planDetails[0].planId, item.value, 'E') | DecimalValue}}
                            </div>
                        </div>
                    </div>


                    <!-- Premium -->
                    <div class="row" id="headerDiv">
                        <div class="col-xs-9 col-9 mt-2 pl-4 fbold">{{'Premium' | translate}}{{'InAED' | translate}}
                        </div>
                        <div class="col-xs-3 col-3 mt-3">
                            {{getPremiumWithCharges(plan.planDetails[0])| DecimalValue}}
                        </div>
                    </div>

                    <!-- Discount -->
                    <div *ngIf="isNotEmpty(discounts)">
                        <div class="row" *ngFor="let item of discounts | keyvalue">
                            <div class="col-xs-9 col-9 mt-3 pl-4 fbold">
                                {{item.key}}{{'InAED' | translate}}</div>
                            <div class="col-xs-3 col-3 mt-3 ">
                                {{fetchAmount(plan.planDetails[0].planId, item.value, 'D') | DecimalValue}}
                            </div>
                        </div>
                    </div>

                    <!-- Promotional Discount -->
                    <div class="py-2" *ngIf="showPromoDiscount">
                        <div>
                            <div class="card-body" style="padding:0px;">
                                <div class="row" id="headerDiv">
                                    <div class="mt-2 pl-4 fbold" style="width: 365px;">Promotional Discount (in AED)</div>
                                    <div class="row ml-0" *ngFor="let item of promoDiscounts | keyvalue">
                                        <ng-container *ngFor="let plan of planOb['plans']">
                                            <div class="mt-2 text-center" style="width: 200px;">
                                                {{fetchAmount(plan.planDetails[0].planId, item.value, 'D') | DecimalValue}}
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- Loadings section-->
                    <div class="py-2" *ngIf="isNotEmpty(loadings)">
                        <div>
                            <span class="fbold">{{'Loadings' | translate}}</span>
                        </div>
                        <div>
                            <div style="padding:0px;" class="card-body m-1">
                                <div class="row" *ngFor="let item of loadings | keyvalue">
                                    <div class="mt-3 pl-4 fbold" style="width: 365px;">{{item.key}} {{'InAED' | translate}}</div>
                                    <div class="mt-3 text-center" style="width: 200px;">
                                        {{fetchAmount(plan.planDetails[0].planId, item.value, 'L') | DecimalValue}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- Net Premium -->
                    <div class="row" id="headerDiv">
                        <div class="col-xs-9 col-9 mt-2 pl-4 fbold">{{'NetPremium' | translate}}{{'InAED' | translate}}
                        </div>
                        <div class="col-xs-3 col-3 mt-3">
                            {{getNetPremium(plan.planDetails[0]) | DecimalValue}}
                        </div>
                    </div>

                    <!-- VAT section -->
                    <div class="row" id="headerDiv">
                        <div class="col-xs-9 col-9 mt-2 pl-4 fbold">{{'VAT' | translate}} {{ VatPercentage }} {{'InAED' | translate}}</div>
                        <div class="col-xs-3 col-3 mt-3" *ngFor="let item of charges | keyvalue">
                            {{fetchAmount(plan.planDetails[0].planId, item.value, 'P') | DecimalValue}}
                        </div>
                    </div>



                    <!-- Premium including VAT-->

                    <div class="row" id="headerDiv">
                        <div class="col-xs-9 col-9 mt-2 pl-4 fbold">{{'PremiumIncludingVAT' | translate}} {{'InAED' | translate}}</div>
                        <div class="col-xs-3 col-3 mt-3">
                            {{getPremiumWithVat(plan.planDetails[0]) | DecimalValue}}
                        </div>
                    </div>

                </mat-tab>

            </mat-tab-group>




        </div>
    </div>
    <div class="my-4 d-flex justify-content-between">
        <button type="button" class="btn button bggreen fwhite" (click)="goBack()">{{'ReviseDetails' | translate}}</button>
        <button type="button" class="btn button bggreen fwhite" (click)="confirmPlan()">{{'Continue' | translate}}</button>
    </div>

</div>